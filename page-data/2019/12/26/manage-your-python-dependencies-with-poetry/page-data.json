{"componentChunkName":"component---src-templates-post-js","path":"/2019/12/26/manage-your-python-dependencies-with-poetry/","result":{"data":{"markdownRemark":{"html":"<p>In the recent past I was excited blogging about <a href=\"/2018/01/28/manage-your-python-dependencies-with-pipenv/\">Pipenv</a>.<br>\nToday I decided to try out <a href=\"https://python-poetry.org/\" target=\"_blank\" rel=\"noopener noreferrer\">Poetry</a> since it reached version 1.0 this month and there is a lot of hype around it.</p>\n<p>Poetry is a tool for managing Python dependencies as well as virtual environments.</p>\n<h3>Getting started</h3>\n<p>Poetry can be installed by running:</p>\n<pre><code>curl -sSL https://raw.githubusercontent.com/python-poetry/poetry/master/get-poetry.py | python\n</code></pre>\n<p>Installation will add Poetry on the home directory and make it automatically available on bash:</p>\n<pre><code>export PATH=\"$HOME/.poetry/bin:$PATH\"\n</code></pre>\n<h3>Installing Python dependencies</h3>\n<p>Poetry is using the standardized file format <a href=\"https://www.python.org/dev/peps/pep-0518/\" target=\"_blank\" rel=\"noopener noreferrer\">pyproject.toml</a>.<br>\nThe <code>pyproject.toml</code> file can be created by simply running <code>poetry init</code> and following the on-screen instructions.</p>\n<p>With the <code>pyproject.toml</code> file in place, let's try to install the popular library <code>requests</code>:</p>\n<pre><code>poetry add requests\n</code></pre>\n<p>Poetry will automagically:</p>\n<ul>\n<li>Create a new virtualenv if it doesn't already exist</li>\n<li>Install <code>requests</code> on the virtualenv</li>\n<li>Update <code>pyproject.toml</code> with the <code>requests</code> entry</li>\n<li>Create or update <code>poetry.lock</code> that holds the dependency tree.</li>\n</ul>\n<p>Note: make sure both <code>pyproject.toml</code> and <code>poetry.lock</code> are under version control.</p>\n<p>Dev dependencies can be installed by using the <code>--dev</code> flag, for example:</p>\n<pre><code>poetry add nose --dev\n</code></pre>\n<h3>Uninstalling Python dependencies</h3>\n<p>Poetry can uninstall a dependency by running:</p>\n<pre><code>poetry remove requests\n</code></pre>\n<h3>Running commands on the virtualenv</h3>\n<p>Any command can be run on the created virtualenv by using <code>poetry run</code>, for example:</p>\n<pre><code>poetry run python --version\n</code></pre>\n<p>Alternatively a shell can be spawned by running <code>poetry shell</code> to avoid prefixing every command.</p>\n<h3>Managing Python virtual environments for a project</h3>\n<p>Let's suppose that a project has to be run specifically on Python version 3.7.5.\nPoetry can make use of pyenv environments or even python executables that are available on the path.</p>\n<p>Using <code>pyenv</code> to get Python 3.7.5:</p>\n<pre><code>pyenv install 3.7.5\npyenv local 3.7.5\n</code></pre>\n<p>Update Python version at <code>pyproject.toml</code>:</p>\n<pre><code>[tool.poetry.dependencies]\npython = \"^3.7.5\"\n</code></pre>\n<p>Re-install dependencies for Python 3.7.5:</p>\n<pre><code>poetry install\n</code></pre>\n<p>List all existing virtual environments for a project:</p>\n<pre><code>poetry env list\n</code></pre>\n<p>Switch a virtual environment:</p>\n<pre><code>poetry env use &#x3C;env-name>\n</code></pre>\n<p>Remove a virtual environment:</p>\n<pre><code>poetry env remove &#x3C;env-name>\n</code></pre>\n<h3>Other useful Poetry functionalities</h3>\n<p>Poetry can <code>build</code> and <code>publish</code> packages using the respective commands, something that is missing from Pipenv.<br>\nPoetry lock file can be exported to other formats like <code>requirements.txt</code> by using the <code>export</code> command.<br>\nPoetry can display package info by using the <code>search</code> command.</p>\n<h3>Docker</h3>\n<p>Deploying dependencies on Docker containers should not require installing them under a virtualenv.<br>\nPoetry is providing a handy command for disabling the default behaviour:</p>\n<pre><code>RUN poetry config virtualenvs.create false \\\n  &#x26;&#x26; poetry install --no-dev --no-interaction --no-ansi\n</code></pre>\n<h3>Conclusion</h3>\n<p>Poetry is an awesome tool, it builds upon previous Pipenv features while at the same time is simplifying the virtual environments handling. Since version 1.0 is out it can be considered pretty stable and ready for production.</p>","frontmatter":{"title":"How to manage your Python dependencies with Poetry","date":"26 Dec 2019"}}},"pageContext":{}}}